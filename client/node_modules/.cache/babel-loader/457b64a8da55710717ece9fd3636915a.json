{"ast":null,"code":"var _jsxFileName = \"/Users/oevbuoma/Desktop/Wootlab projects/heatmap/client/src/App.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport CalendarHeatmap from 'react-calendar-heatmap';\nimport 'react-calendar-heatmap/dist/styles.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst App = () => {\n  _s();\n\n  const [data, setData] = useState();\n  const [dateData, setDateData] = useState();\n\n  const group = array => {\n    return array.reduce((acc, obj) => {\n      const property = obj[\"date\"];\n      acc[property] = acc[property] || [];\n      acc[property].push(obj);\n      return acc;\n    }, {});\n  };\n\n  const creditTotal = data => {\n    let total = 0;\n    data.map(d => {\n      if (d.transactionType === 'credit') {\n        return total += d.amount;\n      }\n    });\n    return total;\n  };\n\n  const debitTotal = data => {\n    let total = 0;\n    data.map((d, i) => {\n      if (d.transactionType === 'debit') {\n        return total += d.amount;\n      }\n    });\n    return total;\n  };\n\n  const total = data => {\n    return data.reduce((a, b) => {\n      return a + b.amount;\n    }, 0);\n  };\n\n  const sort = data => {\n    return data.sort((a, b) => +new Date(a.date) - +new Date(b.date));\n  };\n\n  const numberWithCommas = x => {\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  };\n\n  const title = value => {\n    if ((value === null || value === void 0 ? void 0 : value.total) === undefined) return `No transaction`;\n    return `\n    ${value === null || value === void 0 ? void 0 : value.date} \n    Credit: ${numberWithCommas(Math.floor(value === null || value === void 0 ? void 0 : value.creditTotal))}, \n    Debit: ${numberWithCommas(Math.floor(value === null || value === void 0 ? void 0 : value.debitTotal))}, \n    Total: ${numberWithCommas(Math.floor(value === null || value === void 0 ? void 0 : value.total))}`;\n  };\n\n  useEffect(() => {\n    fetch('http://localhost:5000/transactions').then(res => res.json()).then(res => setData(res)).catch(e => console.error(e));\n  }, []);\n  useEffect(() => {\n    if (data) {\n      let sampleDate = group(data);\n      const date = Object.keys(sampleDate).map((date, index) => {\n        return sampleDate[date].map(d => {\n          return {\n            date: d.date,\n            amount: d.amount,\n            transactionType: d.transactionType\n          };\n        });\n      });\n      const value = date.map((data, index) => {\n        return {\n          date: Object.keys(sampleDate)[index],\n          total: total(data),\n          creditTotal: creditTotal(data),\n          debitTotal: debitTotal(data)\n        };\n      });\n      setDateData(value);\n    }\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid place-items-center w-full h-[100vh]\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-full px-12 md:px-0 md:w-[60vw]\",\n      children: dateData ? /*#__PURE__*/_jsxDEV(CalendarHeatmap, {\n        startDate: new Date('2019-01-01'),\n        endDate: new Date('2019-12-31'),\n        values: sort(dateData),\n        titleForValue: title,\n        showWeekdayLabels: true,\n        classForValue: value => {\n          if (!value) return 'color-empty';\n\n          if (value.creditTotal > value.debitTotal) {\n            const percent = value.creditTotal / value.total;\n            percent > 33;\n          }\n\n          ;\n          return 'negative';\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-center\",\n        children: \"Loading...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n};\n\n_s(App, \"ix0XYqVKI/ws3z1b7ObkMykhZIc=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/oevbuoma/Desktop/Wootlab projects/heatmap/client/src/App.tsx"],"names":["React","useEffect","useState","CalendarHeatmap","App","data","setData","dateData","setDateData","group","array","reduce","acc","obj","property","push","creditTotal","total","map","d","transactionType","amount","debitTotal","i","a","b","sort","Date","date","numberWithCommas","x","toString","replace","title","value","undefined","Math","floor","fetch","then","res","json","catch","e","console","error","sampleDate","Object","keys","index","percent"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport CalendarHeatmap from 'react-calendar-heatmap';\nimport IData from './interfaces/IData';\nimport 'react-calendar-heatmap/dist/styles.css';\nimport IResult from './interfaces/IResult';\n\nconst App = ():JSX.Element => {\n  const [data, setData] = useState<IData[]>();\n  const [dateData, setDateData] = useState<any>();\n\n\n const group = (array: Array<any>) => {\n    return array.reduce((acc, obj) => {\n      const property = obj[\"date\"];\n      acc[property] = acc[property] || [];\n      acc[property].push(obj);\n      return acc;\n    }, {});\n  };\n  const creditTotal = (data: Array<IData>): number => {\n    let total = 0;\n    data.map((d) => {\n      if (d.transactionType === 'credit') {\n        return total += d.amount;\n      }\n    })\n    return total;\n  }\n  const debitTotal = (data: Array<IData>): number => {\n    let total = 0;\n    data.map((d, i) => {\n      if (d.transactionType === 'debit') {\n        return total += d.amount;\n      }\n    })\n    return total;\n  }\n  const total = (data: Array<IData>): number =>{\n    return data.reduce((a: any, b: any) =>{\n      return a + b.amount;\n    },0)\n  }\n  const sort = (data: Array<any>): Array<any> => {\n    return data.sort((a, b) => +new Date(a.date) - +new Date(b.date))\n  }\n\n  const numberWithCommas = (x:number) => {\n    return x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\n  }\n  \n\n  const title = (value: IResult): string => {\n    if (value?.total === undefined) return `No transaction`\n    return `\n    ${value?.date} \n    Credit: ${numberWithCommas(Math.floor(value?.creditTotal))}, \n    Debit: ${numberWithCommas(Math.floor(value?.debitTotal))}, \n    Total: ${numberWithCommas(Math.floor(value?.total))}`\n  }\n\n  useEffect(()=>{\n    fetch('http://localhost:5000/transactions')\n      .then(res => res.json())\n      .then(res => setData(res))\n      .catch(e => console.error(e));\n    }, []);\n    \n    useEffect(()=>{\n      \n      if (data) {\n        let sampleDate = group(data!);\n        const date = Object.keys(sampleDate).map((date, index) =>{\n          return sampleDate[date].map((d: IData) => {\n            return {date: d.date, amount: d.amount, transactionType: d.transactionType}\n          })\n        });\n\n        const value = date.map((data, index)=>{\n          return {date: Object.keys(sampleDate)[index], total: total(data), creditTotal: creditTotal(data), debitTotal: debitTotal(data)};\n        });\n        setDateData(value);\n\n      }\n\n      \n    }, [data]);\n\n\n  return (\n    <div className=\"grid place-items-center w-full h-[100vh]\">\n      <div className=\"w-full px-12 md:px-0 md:w-[60vw]\">\n        {dateData ? \n          <CalendarHeatmap\n            startDate={new Date('2019-01-01')}\n            endDate={new Date('2019-12-31')}\n            values={sort(dateData)}\n            titleForValue={title}\n            showWeekdayLabels\n            classForValue={(value)=>{\n              if (!value) return 'color-empty';\n              if(value.creditTotal > value.debitTotal) {\n                const percent = value.creditTotal / value.total;\n                percent > 33\n              };\n              return 'negative'\n            }}\n          />\n          :\n          <p className=\"text-center\">Loading...</p>\n        }\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}